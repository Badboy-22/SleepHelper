<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>메인</title>
  <link rel="stylesheet" href="/src/css/main.css" />
</head>

<body>
  <!-- Top Bar (다른 페이지와 동일 구조) -->
  <header class="topbar">
    <nav class="nav" role="navigation" aria-label="Primary">
      <a href="/src/html/main.html">메인</a>
      <a href="/src/html/fatigue.html">피로도</a>
      <a href="/src/html/schedule.html">일정</a>
      <a href="/src/html/recommend.html">추천</a>
    </nav>
    <button id="logoutBtn" class="logout-btn">로그아웃</button>
  </header>

  <!-- Page -->
  <main class="page">
    <section class="page-head">
      <h1 id="todayTitle">오늘</h1>
      <div class="actions">
        <button id="refreshBtn" class="btn">새로고침</button>
      </div>
    </section>

    <section class="grid">
      <!-- Left: 오늘 일정 + 다음 일정 -->
      <div class="card">
        <div class="card-head">
          <h2>오늘의 일정</h2>
          <div class="hint" id="todayHint"></div>
        </div>
        <ul id="todaySchedule" class="list"></ul>

        <h3 class="sub">다음 일정</h3>
        <ul id="nextSchedule" class="list small"></ul>
      </div>

      <!-- Right: 피로도 KPI + 최근 기록 + Streak/Alerts -->
      <div class="card">
        <div class="card-head">
          <h2>피로도 요약(최근 7일)</h2>
          <div class="hint" id="fatigueHint"></div>
        </div>

        <div id="fatigueKpis" class="kpis"></div>

        <h3 class="sub">최근 기록(최대 10개)</h3>
        <ul id="fatigueRecent" class="list"></ul>

        <h3 class="sub">기록 연속 일수 · 알림</h3>
        <div id="streakRow" class="kpis"></div>
        <ul id="alertList" class="list small"></ul>

        <div class="quick">
          <a class="btn link" href="/src/html/fatigue.html">피로도 기록하기</a>
          <a class="btn link" href="/src/html/schedule.html">일정 추가/보기</a>
          <a class="btn link" href="/src/html/recommend.html">수면 추천받기</a>
        </div>
      </div>
    </section>
  </main>

  <script type="module" src="/src/js/main.js"></script>

  <!-- 활성 탭 지정(공통) -->
  <script>
    (function () {
      const path = location.pathname.split("/").pop(); // e.g., main.html
      document.querySelectorAll(".nav a").forEach((a, i) => {
        const file = a.getAttribute("href").split("/").pop();
        if (file === path) a.setAttribute("aria-current", "page");
        if (i === 1) a.classList.add("muted");  // 두 번째 탭 회색
      });
    })();
  </script>
</body>

</html>